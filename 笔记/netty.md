#### 尚硅谷 韩顺平Netty视频课程

#### Netty介绍

是一个异步的高性能通信框架

主要针对TCP协议下，面向client的高并发

Java共支持3种网络编程模型I/O模式：BIO NIO  AIO

BIO:同步并阻塞（传统阻塞型） `一个连接对应一个线程`  客户端有连接请求时 服务器端就需要启动一个线程进行处理，如果这个连接不做任何事情就会造成不必要的线程开销。(有多少个客户端就有多少个线程)

NIO：同步非阻塞  **一个线程处理多个请求**，即客户端发送的连接请求都会注册到多路复用器上。尽量减少空闲的线程。

AIO：异步非阻塞  引入异步通道的概念。 （AIO还没有广泛应用）

三种模式的适用场景：

BIO适合连接数目比较小且固定的，这种方式对服务器资源要求比较高。

NIO适用于连接数目多且连接比较短的架构，比如聊天服务器，弹幕。

AIO适用于连接数目多且连接比较长的架构。

#### BIO详细介绍

blocking I/O  同步阻塞

代码在NettyPro文件夹下/BIOServer。服务器启动后，客户端输入telnet 127.0.0.1 6666，然后按ctrl+]进入输入界面。



#### NIO

non-blocking IO 同步非阻塞的

NIO有三大核心部分：Channel(通道)、Buffer(缓冲区)、Selector(选择器)

NIO是面向缓冲区或者面向块编程的。

NIO中的数据总是从通道读取到缓冲区中，或者从缓冲区写入到通道中。 （是双向的）

Selector用于监听**多个**通道的事件，因此使用单个线程就可以监听多个客户端通道。Selector能够检测多个注册的通道上是否有事件发生。

只有在 连接/通道 真正有读写事件发生时，才会进行读写，大大减少了系统开销，并且不需要为每个连接都创建一个线程，不用去维护多个线程。

##### 缓冲区Buffer

有四个属性来提供关于其所包含的数据元素的信息：

Capacity  :  容量  可以容纳的最大数据量，创建时即被确定且不能更改

Limit：   缓冲区的当前终点，不能对缓冲区超过极限的位置进行读写操作，且极限是可以修改的。

Position:   位置。下一个要被读或者写的元素的索引

Mark：标记



#### NIO实现群聊系统

服务器端:可以检测用户上线，离线，并实现消息转发功能。





























