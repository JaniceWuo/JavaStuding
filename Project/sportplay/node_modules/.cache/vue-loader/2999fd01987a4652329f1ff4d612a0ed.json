{"remainingRequest":"E:\\JavaStuding\\Project\\sportplay\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JavaStuding\\Project\\sportplay\\src\\components\\admin\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JavaStuding\\Project\\sportplay\\src\\components\\admin\\User.vue","mtime":1593064984817},{"path":"E:\\JavaStuding\\Project\\sportplay\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JavaStuding\\Project\\sportplay\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JavaStuding\\Project\\sportplay\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JavaStuding\\Project\\sportplay\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpew0KICAgICAgICByZXR1cm57DQogICAgICAgICAgICBxdWVyeUluZm86IHsNCiAgICAgICAgICAgIHF1ZXJ5OiAiIiwNCiAgICAgICAgICAgIHBhZ2VOdW06IDEsDQogICAgICAgICAgICBwYWdlU2l6ZTogNQ0KICAgICAgfSwNCiAgICAgIHVzZXJsaXN0OiBbXSwvLyDnlKjmiLfliJfooagNCiAgICAgIHRvdGFsOiAwLCAvLyDmnIDlpKfmlbDmja7orrDlvZUNCiAgICAgIGFkZERpYWxvZ1Zpc2libGU6ZmFsc2UsDQogICAgICBhZGRGb3JtOnsNCiAgICAgICAgICB1c2VybmFtZTonJywNCiAgICAgICAgICBwYXNzd29yZDonJywNCiAgICAgICAgICBlbWFpbDonJywNCiAgICAgIH0sDQoNCiAgICAgIGVkaXRGb3JtOnt9LCAgLy/kv67mlLnnmoTnlKjmiLfkv6Hmga/ooajljZUNCiAgICAgIGVkaXREaWFsb2dWaXNpYmxlOmZhbHNlLA0KICAgICAgYWRkRm9ybVJ1bGVzOnsNCiAgICAgICAgICAgdXNlcm5hbWU6Ww0KICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl55So5oi35ZCNIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgIHsgbWluOiA1LCBtYXg6IDgsIG1lc3NhZ2U6ICLplb/luqblnKggNSDliLAgOCDkuKrlrZfnrKYiLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdLA0KICAgICAgICAgICAgcGFzc3dvcmQ6Ww0KICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5a+G56CBIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgIHsgbWluOiA2LCBtYXg6IDgsIG1lc3NhZ2U6ICLplb/luqblnKggNiDliLAgOCDkuKrlrZfnrKYiLCB0cmlnZ2VyOiAiYmx1ciIgfQ0KICAgICAgICBdLA0KICAgICAgICAgICAgZW1haWw6Ww0KICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl6YKu566xIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgIHsgbWluOiA1LCBtYXg6IDE1LCBtZXNzYWdlOiAi6K+36L6T5YWl5q2j56Gu6YKu566x5Zyw5Z2AIiwgdHJpZ2dlcjogImJsdXIiIH0NCiAgICAgICAgXSwNCiAgICB9LA0KICAgIGVkaXRGb3JtUnVsZXM6ew0KICAgICAgICBwYXNzd29yZDpbDQogICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXlr4bnoIEiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICAgeyBtaW46IDYsIG1heDogOCwgbWVzc2FnZTogIumVv+W6puWcqCA2IOWIsCA4IOS4quWtl+espiIsIHRyaWdnZXI6ICJibHVyIiB9DQogICAgICAgICAgXSwNCiAgICAgICAgZW1haWw6Ww0KICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl6YKu566xIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgIHsgbWluOiA1LCBtYXg6IDE1LCBtZXNzYWdlOiAi6K+36L6T5YWl5q2j56Gu6YKu566x5Zyw5Z2AIiwgdHJpZ2dlcjogImJsdXIiIH0NCiAgICAgICAgICBdLA0KICAgIH0sDQogICAgfTsNCiAgICB9LA0KICAgIGNyZWF0ZWQoKXsNCiAgICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpOw0KICAgIH0sDQogICAgbWV0aG9kczp7DQogICAgICAgIGFzeW5jIGdldFVzZXJMaXN0KCl7DQogICAgICAgICAgICBjb25zdHtkYXRhOnJlc30gPSBhd2FpdCB0aGlzLiRheGlvcy5nZXQoImFsbFVzZXIiLHsNCiAgICAgICAgICAgICAgICBwYXJhbXM6dGhpcy5xdWVyeUluZm8gICAvL+W4puWPguaVsOeahOS8oOmAkg0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLnVzZXJsaXN0ID0gcmVzLmRhdGE7DQogICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLm51bWJlcnM7DQogICAgICAgIH0sDQogICAgICAgICAgICAvL+ebkeWQrHBhZ2VTaXpl5pS55Y+Y55qE5LqL5Lu2DQogICAgICAgIGhhbmRsZVNpemVDaGFuZ2UobmV3U2l6ZSl7DQogICAgICAgICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlU2l6ZSA9IG5ld1NpemU7DQogICAgICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7IA0KICAgICAgICB9LA0KICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1BhZ2Upew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIuiwg+eUqOS6humhtemdouWIh+aNouS6i+S7tiIpOw0KICAgICAgICAgICAgdGhpcy5xdWVyeUluZm8ucGFnZU51bSA9IG5ld1BhZ2U7DQogICAgICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7DQogICAgICAgIH0sDQogICAgICAgIGFkZERpYWxvZ0Nsb3NlZCgpew0KICAgICAgICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtUmVmLnJlc2V0RmllbGRzKCk7Ly8g6YeN572u6KGo5Y2V6aG5DQogICAgICAgIH0sDQogICAgICAgIC8vIOS/ruaUueeUqOaIt+eKtuaAgQ0KICAgICAgICBhc3luYyB1c2VyU3RhdGVDaGFuZ2VkKHVzZXJpbmZvKSB7DQogICAgICAgICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kYXhpb3MucHV0KA0KICAgICAgICAgICAgYHVzZXJTdGF0ZT9pZD0ke3VzZXJpbmZvLmlkfSZzdGF0ZT0ke3VzZXJpbmZvLnN0YXRlfWANCiAgICAgICAgKTsNCiAgICAgICAgICAgIGlmIChyZXMgIT0gInN1Y2Nlc3MiKSB7DQogICAgICAgICAgICAgICAgdXNlcmluZm8uc3RhdGUgPSAhdXNlcmluZm8uc3RhdGU7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaTjeS9nOWksei0pe+8ge+8ge+8gSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip/vvIHvvIHvvIEiKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBhZGRVc2VyKCl7DQogICAgICAgICAgICB0aGlzLiRyZWZzLmFkZEZvcm1SZWYudmFsaWRhdGUoYXN5bmMgdmFsaWQ9PnsNCiAgICAgICAgICAgICAgICBpZighdmFsaWQpIHJldHVybjsNCiAgICAgICAgICAgICAgICBjb25zdCB7ZGF0YTpyZXN9ID0gYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgiYWRkVXNlciIsdGhpcy5hZGRGb3JtKTsNCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgICAgICAgIGlmKHJlcyAhPSAic3VjY2VzcyIpew0KICAgICAgICAgICAgICAgICAgICB1c2VyaW5mby5zdGF0ZSA9ICF1c2VyaW5mby5zdGF0ZTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaTjeS9nOWksei0pe+8ge+8ge+8gSIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaTjeS9nOaIkOWKn++8ge+8ge+8gSIpOw0KICAgICAgICAgICAgICAgIHRoaXMuYWRkRGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIC8v5bGV56S65L+u5pS55qGGDQogICAgICAgIGFzeW5jIHNob3dFZGl0RGlhbG9nKGlkKXsNCiAgICAgICAgICAgIGNvbnN0e2RhdGE6cmVzfSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldCgiZ2V0VXBkYXRlIix7DQogICAgICAgICAgICAgICAgcGFyYW1zOnsiaWQiOmlkfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB0aGlzLmVkaXRGb3JtID0gcmVzOyAgLy/miorlvZPliY3mn6XliLDnmoTnlKjmiLfkv6Hmga/lm57mmL4NCiAgICAgICAgICAgIHRoaXMuZWRpdERpYWxvZ1Zpc2libGUgPSB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICAvLyDlhbPpl63nqpflj6MNCiAgICAgICAgZWRpdERpYWxvZ0Nsb3NlZCgpew0KICAgICAgICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybVJlZi5yZXNldEZpZWxkcygpOw0KICAgICAgICB9LA0KICAgICAgICAvL+eCueWHu+ehruiupOS/ruaUueeahOaMiemSruS6i+S7tiAg5bCG5L+u5pS555qE5pWw5o2u5a2Y5Zue5pWw5o2u5bqT5LitDQogICAgICAgIGVkaXRVc2VySW5mbygpew0KICAgICAgICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybVJlZi52YWxpZGF0ZShhc3luYyB2YWxpZD0+ew0KICAgICAgICAgICAgICAgIGlmKCF2YWxpZCkgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGNvbnN0e2RhdGE6cmVzfSA9IGF3YWl0IHRoaXMuJGF4aW9zLnB1dCgiZWRpdFVzZXIiLHRoaXMuZWRpdEZvcm0pOyAgLy90aGlzLmVkaXRGb3Jt5bey57uP5Y+Y5Li65L+u5pS55ZCO55qE5YaF5a65DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgICAgICAgICBpZiAocmVzICE9ICJzdWNjZXNzIikgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaTjeS9nOWksei0pe+8ge+8ge+8gSIpOw0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5pON5L2c5oiQ5Yqf77yB77yB77yBIik7DQogICAgICAgICAgICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsgIC8v6LCD55So6L+Z5Liq5pa55rOV5bqU6K+l5Lmf5piv5Li65LqG5Zue5pi+DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZGVsZXRlVXNlcihpZCl7DQogICAgICAgICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l55So5oi3LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsNCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICAgIH0pLmNhdGNoKGVyciA9PiBlcnIpICAgICAgICANCiAgICAgICAgICAgaWYoY29uZmlybVJlc3VsdCE9J2NvbmZpcm0nKXsNCiAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oIuW3suWPlua2iOWIoOmZpCIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3Qge2RhdGE6cmVzfSA9IGF3YWl0IHRoaXMuJGF4aW9zLmRlbGV0ZSgiZGVsZXRlVXNlcj9pZD0iK2lkKTsNCiAgICAgICAgICAgIGlmIChyZXMgIT0gInN1Y2Nlc3MiKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaTjeS9nOWksei0pe+8ge+8ge+8gSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip/vvIHvvIHvvIEiKTsNCiAgICAgICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsNCiAgICAgICAgfSwNCg0KDQoNCg0KICAgIH0sDQoNCn0NCg=="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA","file":"User.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\r\n    <div>\r\n        <el-breadcrumb separator=\"/\">\r\n            <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item><a href=\"/\">活动管理</a></el-breadcrumb-item>\r\n            <el-breadcrumb-item>权限管理</el-breadcrumb-item>\r\n            <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n\r\n        <el-card>\r\n            <el-row :gutter=\"10\">\r\n                <el-col :span=\"5\">\r\n                <el-input placeholder=\"请输入您要查询的姓名\" v-model=\"queryInfo.query\" clearable @clear=\"getUserList\">\r\n                    <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUserList\"></el-button>\r\n                </el-input>\r\n                </el-col>\r\n\r\n                <el-col :span=\"4\">\r\n                    <el-button type=\"primary\" @click=\"addDialogVisible = true\">添加用户</el-button>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <!-- 用户列表 -->\r\n            <el-table :data=\"userlist\" border  height=\"350\">\r\n                <el-table-column type=\"index\"></el-table-column>\r\n                <el-table-column label=\"姓名\" prop=\"username\"></el-table-column>\r\n                <el-table-column label=\"邮箱\" prop=\"email\"></el-table-column>\r\n                <el-table-column label=\"密码\" prop=\"password\"></el-table-column>\r\n                <el-table-column label=\"角色\" prop=\"role\"></el-table-column>\r\n                <el-table-column label=\"状态\" prop=\"state\">\r\n                <template slot-scope=\"scope\"> -->\r\n                    <el-switch v-model=\"scope.row.state\" @change=\"userStateChanged(scope.row)\"></el-switch>\r\n                </template>\r\n                </el-table-column>\r\n\r\n\r\n                <el-table-column label = \"操作\">\r\n                    <template slot-scope=\"scope\">\r\n                        <!-- 修改 -->\r\n                        <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showEditDialog(scope.row.id)\"></el-button>\r\n                        <!-- 删除 -->\r\n                        <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"deleteUser(scope.row.id)\"></el-button>\r\n                        <!-- 权限 -->\r\n                        <el-tooltip effect=\"dark\" content=\"分配权限\" placement=\"top-start\" :enterable=\"false\">\r\n                            <el-button type=\"warning\" icon=\"el-icon-setting\" size=\"mini\"></el-button>\r\n                        </el-tooltip>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n\r\n            <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"queryInfo.pageNum\"\r\n                :page-sizes=\"[1, 2, 5, 10]\"\r\n                :page-size=\"queryInfo.pageSize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"total\">\r\n            </el-pagination>\r\n\r\n        </el-card>\r\n\r\n        <!-- 创建新用户对话框 -->\r\n        <el-dialog title=\"添加用户\" :visible.sync=\"addDialogVisible\" width=\"40%\" @close=\"addDialogClosed\" >\r\n             <!-- 内容主体区域 添加了表单验证规则addFormRules-->\r\n            <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"70px\">  \r\n            <!-- 用户名 -->\r\n            <el-form-item label=\"用户名\" prop=\"username\" >\r\n                <el-input v-model=\"addForm.username\"></el-input>\r\n            </el-form-item>\r\n            <!-- 密码 -->\r\n            <el-form-item label=\"密码\" prop=\"password\">\r\n                <el-input v-model=\"addForm.password\"></el-input>\r\n            </el-form-item>\r\n            <!-- 邮箱 -->\r\n            <el-form-item label=\"邮箱\" prop=\"email\">\r\n                <el-input v-model=\"addForm.email\"></el-input>\r\n            </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n                <!-- 点击确定按钮即调用addUser事件 -->\r\n            </span>\r\n       </el-dialog>\r\n\r\n        <!-- 修改用户对话框 -->\r\n       <el-dialog title=\"修改用户信息\" :visible.sync=\"editDialogVisible\" width=\"40%\" @colse=\"editDialogClosed\">\r\n       <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"60px\">\r\n        <!-- 用户名 -->\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"editForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <!-- 密码 -->\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"editForm.password\"></el-input>\r\n        </el-form-item>\r\n        <!-- 邮箱 -->\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            queryInfo: {\r\n            query: \"\",\r\n            pageNum: 1,\r\n            pageSize: 5\r\n      },\r\n      userlist: [],// 用户列表\r\n      total: 0, // 最大数据记录\r\n      addDialogVisible:false,\r\n      addForm:{\r\n          username:'',\r\n          password:'',\r\n          email:'',\r\n      },\r\n\r\n      editForm:{},  //修改的用户信息表单\r\n      editDialogVisible:false,\r\n      addFormRules:{\r\n           username:[\r\n           { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n           { min: 5, max: 8, message: \"长度在 5 到 8 个字符\", trigger: \"blur\" }\r\n        ],\r\n            password:[\r\n           { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n           { min: 6, max: 8, message: \"长度在 6 到 8 个字符\", trigger: \"blur\" }\r\n        ],\r\n            email:[\r\n           { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n           { min: 5, max: 15, message: \"请输入正确邮箱地址\", trigger: \"blur\" }\r\n        ],\r\n    },\r\n    editFormRules:{\r\n        password:[\r\n           { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n           { min: 6, max: 8, message: \"长度在 6 到 8 个字符\", trigger: \"blur\" }\r\n          ],\r\n        email:[\r\n           { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n           { min: 5, max: 15, message: \"请输入正确邮箱地址\", trigger: \"blur\" }\r\n          ],\r\n    },\r\n    };\r\n    },\r\n    created(){\r\n        this.getUserList();\r\n    },\r\n    methods:{\r\n        async getUserList(){\r\n            const{data:res} = await this.$axios.get(\"allUser\",{\r\n                params:this.queryInfo   //带参数的传递\r\n            });\r\n            this.userlist = res.data;\r\n            this.total = res.numbers;\r\n        },\r\n            //监听pageSize改变的事件\r\n        handleSizeChange(newSize){\r\n            this.queryInfo.pageSize = newSize;\r\n            this.getUserList(); \r\n        },\r\n        handleCurrentChange(newPage){\r\n            // console.log(\"调用了页面切换事件\");\r\n            this.queryInfo.pageNum = newPage;\r\n            this.getUserList();\r\n        },\r\n        addDialogClosed(){\r\n            this.$refs.addFormRef.resetFields();// 重置表单项\r\n        },\r\n        // 修改用户状态\r\n        async userStateChanged(userinfo) {\r\n            const { data: res } = await this.$axios.put(\r\n            `userState?id=${userinfo.id}&state=${userinfo.state}`\r\n        );\r\n            if (res != \"success\") {\r\n                userinfo.state = !userinfo.state;\r\n                return this.$message.error(\"操作失败！！！\");\r\n            }\r\n            this.$message.success(\"操作成功！！！\");\r\n        },\r\n\r\n        addUser(){\r\n            this.$refs.addFormRef.validate(async valid=>{\r\n                if(!valid) return;\r\n                const {data:res} = await this.$axios.post(\"addUser\",this.addForm);\r\n                // console.log(res);\r\n                if(res != \"success\"){\r\n                    userinfo.state = !userinfo.state;\r\n                    return this.$message.error(\"操作失败！！！\");\r\n                }\r\n                this.$message.success(\"操作成功！！！\");\r\n                this.addDialogVisible = false;\r\n                this.getUserList();\r\n            })\r\n        },\r\n        //展示修改框\r\n        async showEditDialog(id){\r\n            const{data:res} = await this.$axios.get(\"getUpdate\",{\r\n                params:{\"id\":id}\r\n            });\r\n            this.editForm = res;  //把当前查到的用户信息回显\r\n            this.editDialogVisible = true;\r\n        },\r\n        // 关闭窗口\r\n        editDialogClosed(){\r\n            this.$refs.editFormRef.resetFields();\r\n        },\r\n        //点击确认修改的按钮事件  将修改的数据存回数据库中\r\n        editUserInfo(){\r\n            this.$refs.editFormRef.validate(async valid=>{\r\n                if(!valid) return;\r\n                const{data:res} = await this.$axios.put(\"editUser\",this.editForm);  //this.editForm已经变为修改后的内容\r\n                console.log(res);\r\n                if (res != \"success\") return this.$message.error(\"操作失败！！！\");\r\n                this.$message.success(\"操作成功！！！\");\r\n                this.editDialogVisible = false;\r\n                this.getUserList();  //调用这个方法应该也是为了回显\r\n            });\r\n        },\r\n        async deleteUser(id){\r\n            const confirmResult = await this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n        }).catch(err => err)        \r\n           if(confirmResult!='confirm'){\r\n               return this.$message.info(\"已取消删除\");\r\n            }\r\n            const {data:res} = await this.$axios.delete(\"deleteUser?id=\"+id);\r\n            if (res != \"success\") {\r\n                return this.$message.error(\"操作失败！！！\");\r\n            }\r\n            this.$message.success(\"操作成功！！！\");\r\n            this.getUserList();\r\n        },\r\n\r\n\r\n\r\n\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>"]}]}